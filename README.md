# Botmock IBM Watson Export Script

[![Build Status](https://dev.azure.com/botmock/botmock-watson-export/_apis/build/status/Botmock.botmock-watson-export?branchName=master)](https://dev.azure.com/botmock/botmock-watson-export/_build/latest?definitionId=5&branchName=master)

> Create IBM Watson Assistant [skills](https://cloud.ibm.com/docs/services/assistant?topic=assistant-skill-add) from Botmock projects

This script produces a `.json` file able to be imported as a skill in the IBM Watson Assistant dashboard.

## Table of Contents

* [Overview](#overview)
  * [Botmock project structure](#botmock-project-structure)
  * [Caveats](#caveats)
  * [Prerequisites](#prerequisites)
    * [nodejs](#nodejs)
    * [watson](#watson)
  * [Installation](#installation)
    * [clone](#clone)
    * [env](#env)
  * [Commands](#commands)
    * [start](#start)
  * [Importing](#importing)
    * [skill](#skill)

## Overview

### Botmock project structure

Intents on connectors in your original project are what break up the flow into separate Dialog Nodes in Watson. Each Dialog Node in Watson will have as a condition the intent that is connected to it. Once this intent is recognized in Watson, responses will be made that correspond to the content blocks connected (without intents) to the first content block.

### Caveats

> Note that for data surrounding [slot-filling](https://cloud.ibm.com/docs/services/assistant?topic=assistant-tutorial-slots-complex) in your original project to appear available in the Watson Assistant dashboard, you must navigate to the node containing slot-filling within the **Dialog** section of the skill and click **Customize**. Upon doing so, you should discover your data from your original project appears automatically within the dashboard.

### Prerequisites

#### NodeJS

- [NodeJS](https://nodejs.org/en/) Version 12.x

```shell
# check node version
node --version
```

#### Watson

- [IBM account with Watson Assistant enabled](https://assistant-us-east.watsonplatform.net/)

### Installation

#### Clone

Clone this repository and install dependencies:

```shell
git clone git@github.com:Botmock/botmock-watson-export.git

cd botmock-watson-export

npm i
```

#### Env

Create `.env` in `/botmock-watson-export` and fill in values for the following:

```shell
BOTMOCK_TOKEN=@botmock-token
BOTMOCK_TEAM_ID=@botmock-team-id
BOTMOCK_BOARD_ID=@botmock-board-id
BOTMOCK_PROJECT_ID=@botmock-project-id
```

To get your Botmock API token, follow the [guide](http://help.botmock.com/en/articles/2334581-developer-api).

### Commands

#### `start`

Populates `/output` with `.json` file produced from your original project.

```shell
npm start
```

### Importing

Once `npm start` is successfully run, the generated `.json` should be able to be imported.

- go to the [IBM dashboard](https://cloud.ibm.com/)
- click **Services**
- click on one of the **Services**, or **Create resource** and then **Watson Assistant** and **Create**
- click **Launch Watson Assistant**
- click on an existing assistant, or **Create assistant**
- click **Add dialog skill**
- click **Import skill**
- choose the `.json` file generated by this script
